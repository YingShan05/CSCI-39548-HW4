{"ast":null,"code":"var _jsxFileName = \"/Users/yingshanli/CSCI/Web Development/restaurant-app/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Header from './components/Header';\nimport Hero from './components/Hero';\nimport Menu from './components/Menu';\nimport Cart from './components/Cart';\nimport About from './components/About';\nimport Contact from './components/Contact';\nimport Footer from './components/Footer';\nimport { fetchMenu, getCart, saveCart, placeOrder } from './api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [route, setRoute] = useState(window.location.hash.replace('#', '') || 'home');\n  const [menu, setMenu] = useState([]);\n  const [cart, setCart] = useState({\n    sessionId: null,\n    items: []\n  });\n  useEffect(() => {\n    window.addEventListener('hashchange', () => setRoute(window.location.hash.replace('#', '') || 'home'));\n    // load menu\n    fetchMenu().then(setMenu).catch(err => console.error(err));\n    // init sessionId in localStorage\n    let sessionId = localStorage.getItem('sessionId');\n    if (!sessionId) {\n      sessionId = 's_' + Math.random().toString(36).slice(2, 10);\n      localStorage.setItem('sessionId', sessionId);\n    }\n    getCart(sessionId).then(c => {\n      if (c) setCart({\n        sessionId,\n        items: c.items || []\n      });else setCart({\n        sessionId,\n        items: []\n      });\n    }).catch(() => setCart({\n      sessionId,\n      items: []\n    }));\n  }, []);\n  async function addToCart(item) {\n    const it = cart.items.find(i => String(i.item) === String(item._id));\n    let newItems;\n    if (it) {\n      newItems = cart.items.map(i => i.item === item._id ? {\n        ...i,\n        qty: i.qty + 1\n      } : i);\n    } else {\n      newItems = [...cart.items, {\n        item: item._id,\n        name: item.name,\n        price: item.price,\n        qty: 1\n      }];\n    }\n    const newCart = {\n      sessionId: cart.sessionId,\n      items: newItems\n    };\n    setCart(newCart);\n    await saveCart(newCart);\n  }\n  async function updateQty(itemId, qty) {\n    const newItems = cart.items.map(i => i.item === itemId ? {\n      ...i,\n      qty\n    } : i).filter(i => i.qty > 0);\n    const newCart = {\n      sessionId: cart.sessionId,\n      items: newItems\n    };\n    setCart(newCart);\n    await saveCart(newCart);\n  }\n  async function removeItem(itemId) {\n    const newItems = cart.items.filter(i => i.item !== itemId);\n    const newCart = {\n      sessionId: cart.sessionId,\n      items: newItems\n    };\n    setCart(newCart);\n    await saveCart(newCart);\n  }\n  async function handlePlaceOrder(customer) {\n    const total = cart.items.reduce((s, i) => s + i.price * i.qty, 0);\n    const order = {\n      items: cart.items,\n      total,\n      customer\n    };\n    const savedOrder = await placeOrder(order);\n    // clear cart\n    setCart({\n      sessionId: cart.sessionId,\n      items: []\n    });\n    await saveCart({\n      sessionId: cart.sessionId,\n      items: []\n    });\n    alert(`Order placed! Order id: ${savedOrder._id}`);\n    window.location.hash = '#home';\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      onNavigate: r => {\n        window.location.hash = '#' + r;\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), route === 'home' && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Hero, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Welcome\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Experience delicious food made with care.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true), route === 'menu' && /*#__PURE__*/_jsxDEV(Menu, {\n      items: menu,\n      onAdd: addToCart\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 28\n    }, this), route === 'cart' && /*#__PURE__*/_jsxDEV(Cart, {\n      items: cart.items,\n      updateQty: updateQty,\n      removeItem: removeItem,\n      placeOrder: handlePlaceOrder\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 28\n    }, this), route === 'about' && /*#__PURE__*/_jsxDEV(About, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 29\n    }, this), route === 'contact' && /*#__PURE__*/_jsxDEV(Contact, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 31\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"Tru9rKx7mUF+p/T+GEsoPAtpWkQ=\");\n_c = App;\nasync function clearCart() {\n  const newCart = {\n    sessionId: cart.sessionId,\n    items: []\n  };\n  setCart(newCart);\n  await saveCart(newCart);\n}\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Header","Hero","Menu","Cart","About","Contact","Footer","fetchMenu","getCart","saveCart","placeOrder","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","route","setRoute","window","location","hash","replace","menu","setMenu","cart","setCart","sessionId","items","addEventListener","then","catch","err","console","error","localStorage","getItem","Math","random","toString","slice","setItem","c","addToCart","item","it","find","i","String","_id","newItems","map","qty","name","price","newCart","updateQty","itemId","filter","removeItem","handlePlaceOrder","customer","total","reduce","s","order","savedOrder","alert","className","children","onNavigate","r","fileName","_jsxFileName","lineNumber","columnNumber","onAdd","_c","clearCart","$RefreshReg$"],"sources":["/Users/yingshanli/CSCI/Web Development/restaurant-app/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Header from './components/Header';\nimport Hero from './components/Hero';\nimport Menu from './components/Menu';\nimport Cart from './components/Cart';\nimport About from './components/About';\nimport Contact from './components/Contact';\nimport Footer from './components/Footer';\nimport { fetchMenu, getCart, saveCart, placeOrder } from './api';\n\nfunction App() {\n  const [route, setRoute] = useState(window.location.hash.replace('#','') || 'home');\n  const [menu, setMenu] = useState([]);\n  const [cart, setCart] = useState({ sessionId: null, items: [] });\n\n  useEffect(() => {\n    window.addEventListener('hashchange', () => setRoute(window.location.hash.replace('#','') || 'home'));\n    // load menu\n    fetchMenu().then(setMenu).catch(err => console.error(err));\n    // init sessionId in localStorage\n    let sessionId = localStorage.getItem('sessionId');\n    if (!sessionId) {\n      sessionId = 's_' + Math.random().toString(36).slice(2,10);\n      localStorage.setItem('sessionId', sessionId);\n    }\n    getCart(sessionId).then(c => {\n      if (c) setCart({ sessionId, items: c.items || [] });\n      else setCart({ sessionId, items: [] });\n    }).catch(() => setCart({ sessionId, items: [] }));\n  }, []);\n\n  async function addToCart(item) {\n    const it = cart.items.find(i => String(i.item) === String(item._id));\n    let newItems;\n    if (it) {\n      newItems = cart.items.map(i => i.item === item._id ? { ...i, qty: i.qty + 1 } : i);\n    } else {\n      newItems = [...cart.items, { item: item._id, name: item.name, price: item.price, qty: 1 }];\n    }\n    const newCart = { sessionId: cart.sessionId, items: newItems };\n    setCart(newCart);\n    await saveCart(newCart);\n  }\n\n  async function updateQty(itemId, qty) {\n    const newItems = cart.items.map(i => i.item === itemId ? { ...i, qty } : i).filter(i => i.qty > 0);\n    const newCart = { sessionId: cart.sessionId, items: newItems };\n    setCart(newCart);\n    await saveCart(newCart);\n  }\n\n  async function removeItem(itemId) {\n    const newItems = cart.items.filter(i => i.item !== itemId);\n    const newCart = { sessionId: cart.sessionId, items: newItems };\n    setCart(newCart);\n    await saveCart(newCart);\n  }\n\n  async function handlePlaceOrder(customer) {\n    const total = cart.items.reduce((s,i) => s + i.price * i.qty, 0);\n    const order = {\n      items: cart.items,\n      total,\n      customer\n    };\n    const savedOrder = await placeOrder(order);\n    // clear cart\n    setCart({ sessionId: cart.sessionId, items: [] });\n    await saveCart({ sessionId: cart.sessionId, items: [] });\n    alert(`Order placed! Order id: ${savedOrder._id}`);\n    window.location.hash = '#home';\n  }\n\n  return (\n    <div className=\"app\">\n      <Header onNavigate={(r)=>{window.location.hash = '#'+r}} />\n      {route === 'home' && <>\n        <Hero />\n        <div className=\"container\">\n          <h2>Welcome</h2>\n          <p>Experience delicious food made with care.</p>\n        </div>\n      </>}\n      {route === 'menu' && <Menu items={menu} onAdd={addToCart} />}\n      {route === 'cart' && <Cart items={cart.items} updateQty={updateQty} removeItem={removeItem} placeOrder={handlePlaceOrder} />}\n      {route === 'about' && <About />}\n      {route === 'contact' && <Contact />}\n      <Footer />\n    </div>\n  );\n}\n\nasync function clearCart() {\n    const newCart = { sessionId: cart.sessionId, items: [] };\n    setCart(newCart);\n    await saveCart(newCart);\n  }\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}